#!/bin/bash
# First check that Leo is installed.
if ! command -v leo &> /dev/null
then
    echo "leo is not installed."
    exit
fi

# Create a new game.
echo "
###############################################################################
########                                                               ########
########              STEP 0: Creating a new game of Zenet             ########
########                                                               ########
########           | 1 | 2 | 1 | 2 | 1 | 2 | 1 | 2 | 1 | 2 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |           ########
########                                                               ########
###############################################################################
"
leo run new

# Player 1 throws a 3 with their dice.
echo "
###############################################################################
########                                                               ########
########            STEP 1: Player 1 makes their first move            ########
########                        Dice roll: 3                           ########
########                                                               ########
########           | 1 | 2 | 1 | 2 | 1 | 2 | 1 | 2 | 0>| 2 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 1<| 0 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |           ########
########                                                               ########
###############################################################################
"
leo run make_move 9u8 3u8 "{ cell_state: 1023u32, occupant: 682u32, p1_turn: true }"

# Player 2 throws a 1 with their dice.
echo "
###############################################################################
########                                                               ########
########            STEP 2: Player 2 makes their first move            ########
########                        Dice roll: 1                           ########
########                                                               ########
########           | 1 | 2 | 1 | 2 | 1 | 2 | 1 | 2 | 0 | 0>|           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 2<|           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |           ########
########                                                               ########
###############################################################################
"
leo run make_move 10u8 1u8 "{ cell_state: 2815u32, occupant: 682u32, p1_turn: false }"

# Player 2 plays again because they threw a 1.
echo "
###############################################################################
########                                                               ########
########              STEP 3: Player 2 makes their 2nd move            ########
########                        Dice roll: 1                           ########
########                                                               ########
########           | 1 | 2 | 1 | 2 | 1 | 2 | 1 | 2 | 0 | 0 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 2<|<1 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |           ########
########                                                               ########
###############################################################################
"
leo run make_move 11u8 1u8 "{ cell_state: 3327u32, occupant: 1194u32, p1_turn: false }"

# Player 2 plays again because they threw a 1.
echo "
###############################################################################
########                                                               ########
########              STEP 4: Player 2 makes their 3nd move            ########
########                        Dice roll: 5                           ########
########                                                               ########
########           | 1 | 2 | 1 | 2 | 1 | 2 | 1 | 0>| 0 | 0 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 2<| 2 | 1 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |           ########
########                                                               ########
###############################################################################
"
leo run make_move 8u8 5u8 "{ cell_state: 3327u32, occupant: 2218u32, p1_turn: false }"

# Player 2 plays again because they threw a 5.
echo "
###############################################################################
########                                                               ########
########              STEP 5: Player 2 makes their 4nd move            ########
########                        Dice roll: 2                           ########
########                                                               ########
########           | 1 | 2 | 1 | 2 | 1 | 0>| 1 |>2 | 0 | 0 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 2 | 2 | 1 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |           ########
########                                                               ########
###############################################################################
"
leo run make_move 6u8 2u8 "{ cell_state: 7295u32, occupant: 6186u32, p1_turn: false }"

# Player 1 plays next
echo "
###############################################################################
########                                                               ########
########              STEP 6: Player 1 makes their 2nd move            ########
########                        Dice roll: 1                           ########
########                                                               ########
########           | 1 | 2 | 1 | 2 | 1 | 0 | 2>|>1 | 0 | 0 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 2 | 2 | 1 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |           ########
########                                                               ########
###############################################################################
"
leo run make_move 7u8 1u8 "{ cell_state: 7391u32, occupant: 6282u32, p1_turn: true }"

# Player 1 plays again because they threw a 1. This time the move is invalid because
# player 2's pieces in cells 12 and 13 are protected.
echo "
###############################################################################
########                                                               ########
########              STEP 6: Player 1 makes an invalid move           ########
########                        Dice roll: 1                           ########
########                                                               ########
########           | 1 | 2 | 1 | 2 | 1 | 0 | 2 | 1 | 0 | 0 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 2 | 2<|<1 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |           ########
########                                                               ########
###############################################################################
"
leo run make_move 11u8 1u8 "{ cell_state: 7391u32, occupant: 6218u32, p1_turn: true }"

# Because the previous move was invalid, Player 1 tries a different move with the same dice roll.
echo "
###############################################################################
########                                                               ########
########              STEP 7: Player 1 makes their 3rd move            ########
########                        Dice roll: 1                           ########
########                                                               ########
########           | 1 | 2 | 1 | 2 | 1 | 0 | 2 | 0>|>1 | 0 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 2 | 2 | 1 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |           ########
########                                                               ########
###############################################################################
"
leo run make_move 8u8 1u8 "{ cell_state: 7391u32, occupant: 6218u32, p1_turn: true }"

# Player 1 plays again because they threw a 1.
echo "
###############################################################################
########                                                               ########
########              STEP 8: Player 1 makes their 3rd move            ########
########                        Dice roll: 3                           ########
########                                                               ########
########           | 1 | 2 | 1 | 2 | 1 | 0 | 2 | 0 | 1 | 0 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 1<| 2 | 2 |<0 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |           ########
########                                                               ########
###############################################################################
"
leo run make_move 11u8 3u8 "{ cell_state: 7519u32, occupant: 6218u32, p1_turn: true }"

# Player 2 plays next.
echo "
###############################################################################
########                                                               ########
########              STEP 9: Player 2 makes their 5th move            ########
########                        Dice roll: 3                           ########
########                                                               ########
########           | 1 | 2 | 1 | 2 | 1 | 0 | 2 | 0 | 1 | 0 |           ########
########           | 0 | 0 | 0 | 0 | 2<| 0 | 1 |<0 | 2 | 0 |           ########
########           | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |           ########
########                                                               ########
###############################################################################
"
leo run make_move 13u8 3u8 "{ cell_state: 14687u32, occupant: 6218u32, p1_turn: false }"

